<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title> The Word Search Game Version : {{ VERSION }}</title>
    
</head>
<body>
    <img src="https://is3-ssl.mzstatic.com/image/thumb/Purple62/v4/ab/3c/2b/ab3c2b05-18aa-9516-e762-a03db9a81036/source/512x512bb.jpg" height="140" width="980" class="imagecentre">
    <h1 style="text-align:center;"> The Word Search Game</h1>     
    <div class ="container" style="text-align:center;">
        <div class ="loginform">
        <label for="username" class ="form=label"> <b>Username:</b> </label>
        <input type="text" class="form-control" id="username" placeholder ="Enter your username" name="username">
        <br>
        <button onclick="submitUsername()">Submit</button>  
        <div id="gameSection" class="container mt-5" style="display: none;"></div>
        </div>

<div class ="gameSection" style ="display: none;">
            <div class="row">
                <div class="col-sm">
                    <div id="activeUsers" class="mt-5">
                        <h2>Active Users</h2>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Username</th>
                                    <th scope="col">Status</th>
                                </tr>
                            </thead>
                            <tbody id="activeUsersList">
                                <!-- Active users will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="col-md-6">
                    <div id="chatSection" class="mt-5 br-3">
                        <h2>Chat</h2>
                        
                        <div id="chatbox" class="mb-3"
                            style="height: 300px; width: 300px; overflow-y: scroll; border: 1px solid #443b3b; padding: 10px;"></div>
                          <input type="text" id="message" class="form-control" placeholder="Type a message..." name="usermessage">
                          <button onclick="sendMessage()">Send</button>
                        
                        </div>
                     </div>

                     <div id="gameTypeSelection" class="GameType">

                        <h2>Select Game Type</h2>
                        <div>
                        <button id = "twoPlayer" onclick="selectGameType(2)">2 Players</button>
                        </div>

                       

                        <div>
                        <button id = "twoPlayer" onclick="selectGameType(3)">3 Players</button>
                        </div>

                        <div>
                        <button id = "twoPlayer"  onclick="selectGameType(4)">4 Players</button>
                        </div>

                        <br>
                        <br>
                        </div>

                        <div id="gameTypeSections">
                            <!-- 2 Players Game Section -->
                            <div id="gameType2" class="gameTypeSection1" style="display: none;">
                                <!-- Content for 2 Players game type -->
                                <br>
                                <h2>Game Type: 2 Players</h2>
                                <div id="TwoPlayers" class="mt-5">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Players Ready to Play</th>  
                                            </tr>
                                        </thead>
                                        <tbody id="TwoPlayerList">
                                            <!-- users will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Add your content for 2 Players game type here -->
                                <div id="playerList2"></div>
                                <button onclick="StartGame()">Start Game</button>
                                <div id="JoinGame">
                                    <br>
                                    <button id="joinGameButton" onclick="JoinGame()">Join Game</button>
                                </div>
                            </div>
        
                            <!-- 3 Players Game Section -->
                            <div id="gameType3" class="gameTypeSection2" style="display: none;">
                                <!-- Content for 3 Players game type -->
                                <br>
                                <h2>Game Type: 3 Players</h2>
                                <div id="ThreePlayers" class="mt-5">
                                 
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Players Ready to Play</th>  
                                            </tr>
                                        </thead>
                                        <tbody id="TwoPlayerList">
                                            <!-- users will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Add your content for 3 Players game type here -->
                                <div id="playerList3"></div>
                                <button onclick="StartGame()">Start Game</button>
                                <div id="JoinGame">
                                    <br>
                                    <button id="joinGameButton" onclick="JoinGame()">Join Game</button>
                                </div>
                            </div>
        
                            <!-- 4 Players Game Section -->
                            <div id="gameType4" class="gameTypeSection3" style="display: none;">
                                <!-- Content for 4 Players game type -->
                                <br>
                                <h2>Game Type : 4 Players</h2>
                                <div id="ThreePlayers" class="mt-5">
                                   
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Players Ready to Play</th>                                               
                                            </tr>
                                        </thead>
                                        <tbody id="TwoPlayerList">
                                            <!-- users will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Add your content for 4 Players game type here -->
                                <div id="playerList2"></div>
                                <button onclick="StartGame()">Start Game</button>
                                <div id="JoinGame">
                                    <br>
                                    <button id="joinGameButton" onclick="JoinGame()">Join Game</button>
                                </div>
                            </div>
                        </div>
                    </div>

                        <script>
                            function selectGameType(numPlayers) {

                                const usernameInput = document.getElementById('username');
                                 const userlist = usernameInput.value;

                                if(numPlayers==2){
                                    document.querySelector(".gameTypeSection1").style.display ="block";
                                    document.querySelector(".GameType").style.display ="none";
                                    console.log("2 Players game selected!");
                                    displayUsernames(userlist); 
                                  
                                }
                                else if(numPlayers==3){
                                    console.log("3 Players game selected!");
                                    document.querySelector(".gameTypeSection2").style.display ="block";
                                    document.querySelector(".GameType").style.display ="none";
                                    displayUsernames(userlist); 
                                }
                                else if(numPlayers==4){
                                    console.log("4 Players game selected!");
                                    document.querySelector(".gameTypeSection3").style.display ="block";
                                    document.querySelector(".GameType").style.display ="none";
                                    displayUsernames(userlist); 
                                }


                                // Send the selected game type to the server
                                     const gameTypeMessage = {
                                     type: 'gameType',
                                    numPlayers: numPlayers,
                                    userlist: userlist
                                      };
                                    socket.send(JSON.stringify(gameTypeMessage));
                                    }

                                    function displayUsernames(userlist) {
                                        
                                        const twoPlayerList = document.getElementById('TwoPlayerList');
                                            twoPlayerList.innerHTML = ''; // Clear the previous list

                                            // Ensure usernames is an array before trying to iterate over it
                                            if (Array.isArray(userlist)) {
                                                userlist.forEach(userlist => {
                                                    const listItem = document.createElement('li');
                                                    listItem.textContent = userlist;
                                                    twoPlayerList.appendChild(listItem);
                                                });
                                            } else {
                                                // If usernames is not an array, display a single item
                                                const listItem = document.createElement('li');
                                                listItem.textContent = username;
                                                twoPlayerList.appendChild(listItem);
                                            }
                                        }

                        </script>

                        

                <div class ="gameSection" style ="display: none;">
                     <button onclick="StartGame()">StartGame</button>

                     <div id="JoinGame">
                        <br>
                     <button id="joinGameButton" onclick="JoinGame()" style= >Join Game</button>

                     </div>

                     </div>

                   </div>
               </div>


               </div>

             

<div class ="mainGame" style ="display: none; ">


    <h1 style="text-align:center;"> Word List</h1>  
    <div id="wordListContainer" style="height: 200px; width: 80%; overflow-y: scroll; border: 1px solid #443b3b; padding: 10px;" class="ListWords">
    </div>
<hr>
<div id="timer" style="height: 50px; width: 100px;border: 2px solid #443b3b; padding: 10px;" ></div>
              

<br>
<div id="gameEndMessage"style="height: 50px; width: 500px; border: 2px solid #443b3b; padding: 10px;"></div>


<hr>

    <h1 style="text-align:center;"> The WordSearch Game</h1>  
    <div id="wordSearchContainer" ></div> 
<hr>
    <h1 style="text-align:center;"> ScoreBoard</h1>  
    <div id="leaderboardContainer"style="height: 200px; width: 80%; overflow-y: scroll; border: 1px solid #443b3b; padding: 10px;" class="Leaderboardscore"></div>></div>

</div>



    
      

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="grid.js"></script>
    <script src="app.js"></script>
 
</body>
</html>
